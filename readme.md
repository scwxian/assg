[![AI Coauthored](https://img.shields.io/badge/AI_Coauthored-â†—_see_context-58a6ff?style=flat)](https://coauthored.dev/#v:1;o:~Y29hdXRob3JlZC5kZXY;created:2026-01-29;scope:project;intent:prod;traj:evolve;ai:code,debug,doc;tools:~R2VtaW5pIFBybw;review:full,ran;strengths:arch,backend;confident:arch,perf;limits:bugs,edge;env:external;data:none;valid:e2e,perf,sec;focus:code,security,edge)

# Another Static Site Generator (ASSG)

Need to build a simple static site that's only a few pages? Some friend asked your help to build a landing page? Can't be bothered to use any JS Framework because of how stupidly simple the website is supposed to be? Client asked to create single webpage but needs some crazy weird 3D bullshit?

I present to you **ASSG**: the poor-man's Astro. It's a simple SSG for building multi-page static websites using [swup.js](https://swup.js.org/) for seamless page transitions and built using Vite. Covers everything a basic site would need plus SEO â€” a fine ASS my G.

## âš ï¸  Heads Up
*Note*: Making this public in case anyone would be interested in building their own static site and needs to cover shit like SEO AND don't want to use any specific framework, templating engine or wtv (_damn, what a niche target audience_).

Assuming some poor random soul actually manages to stumble upon this repo:
* There's stuff generated by AI, but every line has been reviewed by me. So if the code sucks, sorry my dude that's on me.
* Some modules (css / js) are specific to past projects that I previously worked on (like stat-bars.js and faq.js), just remove them if you don't need them, nothing will break.

## âœ¨ Key Features

The site is built with "performance-first" as the focus. The goal is to offload everything to Vite so it does its bundling magic and pre-builds all HTML.

* **SPA-like Navigation (Swup.js)**:
  * Implemented via `app.js`, the site uses **Swup** to handle seamless page transitions without full reloads.
  * The logic is split into a global `main.js` (for persistent elements like the nav) and dynamically imported page scripts (e.g., `home.js`, `about.js`) that are only loaded and initialized when the specific page is viewed.
* **Component-Based Composition**:
  * **HTML**: Uses `vite-plugin-html-inject` to manage reusable partials (Header, Footer, Meta) at build time.
  * **CSS**: Styles are modularized. Global styles are shared and imported via `styles.css`, while page-specific CSS is dynamically injected via the meta partial, ensuring the browser only parses styles relevant to the current page.
  * **JS & Lazy-Loaded "Hydration"**: Interactive componentsâ€”such as the Instagram feed or About page stat barsâ€”are stored in `js/modules`. Using an `IntersectionObserver` in `main.js`, these modules are strictly **lazy-loaded**; the JavaScript is fetched and executed only when the user scrolls the component into view, keeping the initial page load extremely lightweight.

* **Automated Vite Build Pipeline**: A suite of custom and standard plugins automates the static site generation:
  * **`html-entry-finder`**: Recursively detects all `index.html` files to build the Rollup input options automatically.
  * **`static-data-builder`** and **`static-data-injections`**: Explicitly list data sources to build out the html partials and inject into any page, accepts JSON & JSON5.
  * **`html-minifier`**: Compresses the final HTML output for dat page speed score.

* **Centralized Configuration and SEO Assets (`site.config.js`)**:
  * All global variables (Site Name, URLs, Contact Info, Social Links) are defined in one place.
  * A custom Vite plugin automatically finds and replaces `%%VARIABLES%%` across all HTML files and JSON-LD schemas during the build.
  * A custom Vite plugin hooks into the build process to automatically detect all pages and generate an up-to-date `sitemap.xml`, `robots.txt`, and `site.webmanifest` on the fly. No manual XML updating required.

## ðŸŸ¢ Getting Started

* **Pre-req**: **Node.js v20** or higher is required for local development and builds.
* **Initial Setup**:
  1. Clone the repo and rename it to your site's domain name _(example.com)_
  2. Chmod the initialization script `chmod +x init-project.sh`
  2. Run `./init-project.sh` to automatically generates these files:
      * **package.json** is updated with Author and Project Name (based on the name of the directory).
      * **site.config.js** contains everything for your SEO and covers the basic legal pages like ``privacy-policy`` and ``terms-of-use``. Customize them to fit your needs and it will be injected into the HTML.
      * **All .env.*** contains the usual secrets. Except for VITE_BASE_URL, you need to add these secrets into your CI/CD pipeline if they are needed during your build process. The magic keyword for `.env.development` should be the same as the one that you will use for your dev deployment.

**Meta assets for SEO** can be generated at [RealFaviconGenerator](https://realfavicongenerator.net/). The other 3 that needs to be created manually are:
* Logo (logo.png)
* Cover Image (cover-image.png, 1920x1080px)
* Social Share Image (social-share-image.webp, 1200x630px)

## ðŸ—ï¸ Development

The project has distinct workflows for local testing and production deployment.


### Local Dev Server

For active development with live reloading, run the following standard command from the project root:

```bash
npm install && npm run dev
```
*(Use `npx vite --host` if you want to test on a physical mobile device connected to your network like via USB-C)*

**Alternative: Containerized Dev Server**

If you prefer an isolated environment, you can run the dev server inside a container with your local files hot-mounted:

```bash
docker run --rm -it \
  -p 5173:5173 \
  -v "$(pwd)":/app \
  --workdir /app \
  node:20-alpine \
  sh -c "npm install && npm run dev -- --host"
  ```

### Local Build Testing

The `Dockerfile` and `local-build.sh` script are used **exclusively** for testing the production build process locally. Executing `local-build.sh` in root dir will run the full build process to minify and optimize all assets into a final `dist` directory, simulating the CI/CD build.

Then, use any web server of your choice to serve the `dist` dir _(ie: Caddy)_ to simulate a live server and check for any bugs in the final build.

## ðŸš€ Deployment

You can deploy with any provider: AWS CloudFront, CloudFlare Workers, Netlify, Vercel, etc â€” it's totally up to you. The main goal of this project is to generate that final `dist` dir. After that it's just who you fuck with to deploy your shit.

Currently, the default CI/CD Pipeline is to have **GitHub Actions** build the project in a clean Ubuntu environment, sync the `dist` folder into a **S3 bucket** served via **CloudFront**, then create a CloudFront invalidation to ensure the changes go live immediately. It's triggered based on any push to *main* or *dev* for dev and prod deployments respectively.

### CI/CD

Assuming that you want to go with the default, the following **Secrets** and **Variables** must be configured in your GitHub repository settings under **Settings > Secrets and variables > Actions**.

#### Secrets (Encrypted)

| Secret Name | Description | Used In |
| --- | --- | --- |
| `AWS_ACCESS_KEY_ID` | AWS IAM Access Key for deployment. | Dev & Prod |
| `AWS_SECRET_ACCESS_KEY` | AWS IAM Secret Key for deployment. | Dev & Prod |
| `S3_BUCKET_DEV` | Name of the S3 bucket for the **Dev** environment. | Dev Only |
| `S3_BUCKET_PROD` | Name of the S3 bucket for the **Production** environment. | Prod Only |
| `DEV_CLOUDFRONT_DISTRIBUTION_ID` | CloudFront Distribution ID for **Dev** invalidation. | Dev Only |
| `CLOUDFRONT_DISTRIBUTION_ID` | CloudFront Distribution ID for **Production** invalidation. | Prod Only |
| `MAGIC_KEYWORD` | The secret path/subfolder used for Dev deployments. | Dev Only |

#### Variables (Plaintext)

| Variable Name | Value Example | Description |
| --- | --- | --- |
| `AWS_REGION` | `us-east-1` | The AWS Region where your resources reside. |


### Dev Deployment

For internal review, the dev site is deployed to `<subdomain>.<domain>/<magickeyword>/` and set up to prevent search engine indexing. Based on your magic keyword and how you set up AWS CloudFront, the link would look something like `dev.mysite.com/Awjo-IobD`, send this link to people that need to preview the site.

### Prod Deployment

Deployment to production works the same way, just without the magic keyword. If you got dev deployment to work, then you're all set for prod.


## butwhydoe?
Just cause
